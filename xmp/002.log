Processing test statements
================================================================================
### Statement:
sql: update s_settings set key_value = dateadd(-1 day to current_date) where key_name
  = 'STARTWORKDATE'

### Variables:
{}

PASSED
================================================================================
### Statement:
sql: update s_settings set key_value = dateadd(1 day to current_date) where key_name
  = 'STOPWORKDATE'

### Variables:
{}

PASSED
================================================================================
### Statement:
sql: select first 1 id as operator_id from r_workers where rights = 4

### Variables:
{}

### Results:
<result set row with OPERATOR_ID = 1>
PASSED
================================================================================
### Statement:
sql: insert into vw_inc_delivery(doc_date,operator) values(dateadd(2 day to current_date),
  ?)
params:
- operator_id
expect_error_string: поза робочим періодом

### Variables:
OPERATOR_ID: '1'

### Results:
Error while executing SQL statement:
- SQLCODE: -836
- exception 3
- ERROR_DYNAMIC
- Дата документу поза робочим періодом
- At procedure 'SHOW_ERROR' line: 7, col: 5
At procedure 'CHECK_PERIOD' line: 8, col: 70
At trigger 'INC_DELIVERY_BI' line: 6, col: 3
At trigger 'VW_INC_DELIVERY_BI' line: 5, col: 3 -836 335544517
PASSED
================================================================================
### Statement:
sql: insert into vw_inc_delivery(doc_date,operator) values(current_date, -10000)
expect_error_gdscode: '335544466'

### Variables:
OPERATOR_ID: '1'

### Results:
Error while executing SQL statement:
- SQLCODE: -530
- violation of FOREIGN KEY constraint "FK_INC_DELIVERY_3" on table "INC_DELIVERY"
- Foreign key reference target does not exist
- Problematic key value is ("OPERATOR" = -10000)
- At trigger 'VW_INC_DELIVERY_BI' line: 5, col: 3 -530 335544466
PASSED
================================================================================
### Statement:
sql: insert into inc_delivery(doc_date,operator) values(current_date, ?) returning
  id as delivery_id
params:
- operator_id

### Variables:
OPERATOR_ID: '1'

### Results:
<result set row with DELIVERY_ID = 21203>
PASSED
================================================================================
### Statement:
sql: insert into inc_deliverybody(delivery_id, tovar_id, ext_ean13) select first 3
  ?, tovar_id, tovar_code from c_aggrtovar where tovar_id is not null and tovar_code
  is not null
params:
- delivery_id

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'

PASSED
================================================================================
### Statement:
sql: update inc_delivery set commited = 1 where id = ?
params:
- delivery_id

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'

PASSED
================================================================================
### Statement:
sql: insert into inc_deliverybody(delivery_id, tovar_id, ext_ean13) select first 1
  ?, tovar_id, tovar_code from c_aggrtovar where tovar_id is not null and tovar_code
  is not null
params:
- delivery_id
expect_error_string: Не можна міняти проведений документ

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'

### Results:
Error while executing SQL statement:
- SQLCODE: -836
- exception 3
- ERROR_DYNAMIC
- Не можна міняти проведений документ
- At procedure 'SHOW_ERROR' line: 7, col: 5
At trigger 'INC_DELIVERYBODY_BI' line: 12, col: 10 -836 335544517
PASSED
================================================================================
### Statement:
sql: select sum(b.amount * b.price) as s1, d.price as s2 from inc_deliverybody b,
  inc_delivery d where b.delivery_id = d.id and d.id = ? and b.deleted = 0 group by
  2
params:
- delivery_id
expect_equals:
- s1
- s2

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'

### Results:
<result set row with S1 = 9440, S2 = 9440>
Comparing values 9440 and 9440
PASSED
================================================================================
### Statement:
sql: select sum(b.amount * b.sell_price) as s1, d.s_summ as s2 from inc_deliverybody
  b, inc_delivery d where b.delivery_id = d.id and d.id = ? and b.deleted = 0 group
  by 2
params:
- delivery_id
expect_equals:
- s1
- s2

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'
S1: '9440'
S2: '9440'

### Results:
<result set row with S1 = 14040, S2 = 14040>
Comparing values 14040 and 14040
PASSED
================================================================================
### Statement:
sql: update inc_deliverybody set deleted = 1 where delivery_id = ?
params:
- delivery_id
expect_error_string: Не можна міняти проведений документ

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'
S1: '14040'
S2: '14040'

### Results:
Error while executing SQL statement:
- SQLCODE: -836
- exception 3
- ERROR_DYNAMIC
- Не можна міняти проведений документ
- At procedure 'SHOW_ERROR' line: 7, col: 5
At trigger 'INC_DELIVERYBODY_BU0' line: 8, col: 10 -836 335544517
PASSED
================================================================================
### Statement:
sql: update inc_deliverybody set amount = 10 where delivery_id = ?
params:
- delivery_id
expect_error_string: Не можна міняти проведений документ

### Variables:
OPERATOR_ID: '1'
DELIVERY_ID: '21203'
S1: '14040'
S2: '14040'

### Results:
Error while executing SQL statement:
- SQLCODE: -836
- exception 3
- ERROR_DYNAMIC
- Не можна міняти проведений документ
- At procedure 'SHOW_ERROR' line: 7, col: 5
At trigger 'INC_DELIVERYBODY_BU0' line: 8, col: 10 -836 335544517
PASSED
================================================================================
